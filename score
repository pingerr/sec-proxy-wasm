                      功能  性能
IP 黑名单功能	    20%   0.2  0.8
CC 防护功能	    40%   0.4  0.6
WAF 规则防护功能	40%   0.4  0.6

2023-07-10 20:48:43 37.3300
0.0.1 (waf)
[ip deny]  1.33916 seconds
[ip deny]  100, 83.2168
[waf deny] 179.261921 seconds
[waf deny] 50.0 , 50.24602633333334
{'ip_deny': 86.33008, 'waf_deny': 50.147615800000004, 'cc_deny': 0}

2023-07-10 23:12:24 37.8700、37.99
0.0.2 (waf,ip-ipfilter)
[ip deny] ip deny test finished, using 1.083446 seconds
[ip deny] function score: 100, performance score: 88.33107999999999
[waf deny] waf deny test finished, using 178.633502 seconds
[waf deny] function score is 50.0 , performance score is 50.45549933333333
{'ip_deny': 89.39864800000001, 'waf_deny': 50.273299599999994, 'cc_deny': 0}

2023-07-11 00:34:28  37.6400
0.0.4 (waf,ip-cuckoofilter)
[ip deny] ip deny test finished, using 1.203676 seconds
[ip deny] function score: 100, performance score: 85.92648
[waf deny] waf deny test finished, using 179.427358 seconds
[waf deny] function score is 50.0 , performance score is 50.19088066666667
{'ip_deny': 87.95588799999999, 'waf_deny': 50.1145284, 'cc_deny': 0}


2023-07-11 17:06:09  36.9100
0.0.5 (ip-cidranger)
[ip deny] ip deny test finished, using 1.414929 seconds
[ip deny] function score: 100, performance score: 81.70142
[waf deny] waf deny test start
[waf deny] waf deny test finished, using 182.191736 seconds
[waf deny] function score is 50.0 , performance score is 49.269421333333334
[cc deny] evaluation of cc deny is arriving...
{'ip_deny': 85.420852, 'waf_deny': 49.5616528, 'cc_deny': 0}


2023-07-12 01:08:41 38.12
0.0.8 (ip:cidranger, waf:no response)
[ip deny] ip deny test finished, using 1.037383 seconds
[ip deny] function score: 100, performance score: 89.25234
[waf deny] waf deny test start
[waf deny] waf deny test finished, using 178.40252 seconds
[waf deny] function score is 50.0 , performance score is 50.53249333333333
[cc deny] evaluation of cc deny is arriving...
{'ip_deny': 89.951404, 'waf_deny': 50.319495999999994, 'cc_deny': 0}

2023-07-12 14:53:54 38.37
0.0.9 (ip:cidranger-nolog, waf: lfi + logoff)
[ip deny] ip deny test finished, using 1.044549 seconds
[ip deny] function score: 100, performance score: 89.10902
[waf deny] waf deny test finished, using 180.233801 seconds
[waf deny] function score is 52.6 , performance score is 49.92206633333333
{'ip_deny': 89.86541199999999, 'waf_deny': 50.9932398, 'cc_deny': 0}

2023-07-14 16:54:36 38.5700
0.0.13 (ip:cidranger-go优化, waf: lfi go优化)
[ip deny] ip deny test finished, using 1.009677 seconds
[ip deny] function score: 100, performance score: 89.80646
[waf deny] waf deny test finished, using 178.805966 seconds
[waf deny] function score is 52.6 , performance score is 50.39801133333333
{'ip_deny': 90.28387599999999, 'waf_deny': 51.2788068, 'cc_deny': 0}

2023-07-19 21:30:34 score:38.1200
0.2.1 ip(cidranger,go)+waf(lfi, sqli)
[ip deny] ip deny test finished, using 1.00426 seconds
[ip deny] function score: 100, performance score: 89.91479999999999
[waf deny] waf deny test start
[waf deny] waf deny test finished, using 179.386431 seconds
[waf deny] function score is 50.0 , performance score is 50.204523
[cc deny] evaluation of cc deny is arriving...
{'ip_deny': 90.34888000000001, 'waf_deny': 50.1227138, 'cc_deny': 0}

2023-07-20 00:28:55 score:39.6700
xss2 ip(cidranger,go)+waf(xss)
[ip deny] ip deny test finished, using 1.078124 seconds
[ip deny] function score: 100, performance score: 88.43752
[waf deny] waf deny test start
[waf deny] waf deny test finished, using 177.379276 seconds
[waf deny] function score is 59.79 , performance score is 50.87357466666666
[cc deny] evaluation of cc deny is arriving...
{'ip_deny': 89.462512, 'waf_deny': 54.4401448, 'cc_deny': 0}

2023-07-20 00:59:23 score:39.9800
0.2.4 ip(cidranger,go)+waf(xss,lfi)
[ip deny] ip deny test finished, using 1.043924 seconds
[ip deny] function score: 100, performance score: 89.12151999999999
[waf deny] waf deny test start
[waf deny] waf deny test finished, using 177.432397 seconds
[waf deny] function score is 61.22 , performance score is 50.85586766666667
[cc deny] evaluation of cc deny is arriving...
{'ip_deny': 89.87291199999999, 'waf_deny': 55.0015206, 'cc_deny': 0}

2023-07-20 13:26:22
sqli2 feat:ip(no)+waf(sqli)
[ip deny] ip deny test finished, using 1.856009 seconds
[ip deny] exsit ip not been blocked, so your ip deny score is 0
[waf deny] waf deny test start
[waf deny] waf deny test finished, using 179.09012 seconds
[waf deny] function score is 44.24 , performance score is 50.30329333333333
[cc deny] evaluation of cc deny is arriving...
{'ip_deny': 0, 'waf_deny': 47.877976, 'cc_deny': 0}

2023-07-20 13:51:41
0.2.5 feat:ip(all)+waf(sqli)
[ip deny] ip deny test finished, using 1.00758 seconds
[ip deny] function score: 100, performance score: 89.8484
[waf deny] waf deny test start
[waf deny] waf deny test finished, using 178.749664 seconds
[waf deny] function score is 50.0 , performance score is 50.41677866666667
[cc deny] evaluation of cc deny is arriving...
{'ip_deny': 90.30904, 'waf_deny': 50.250067200000004, 'cc_deny': 0}

2023-07-20 22:35:24 score:38.1300
0.2.6 feat:ip(all)+waf(sqli-942100)
[ip deny] ip deny test finished, using 1.036266 seconds
[ip deny] function score: 100, performance score: 89.27468000000002
[waf deny] waf deny test start
[waf deny] waf deny test finished, using 178.289682 seconds
[waf deny] function score is 50.0 , performance score is 50.570106
[cc deny] evaluation of cc deny is arriving...
{'ip_deny': 89.964808, 'waf_deny': 50.3420636, 'cc_deny': 0}

2023-07-21 00:38:34 score:19.3500
rce-skip1 feat:ip(no)+waf(rce,skip)
[ip deny] ip deny test finished, using 1.983487 seconds
[ip deny] exsit ip not been blocked, so your ip deny score is 0
[waf deny] waf deny test start
[waf deny] waf deny test finished, using 179.213709 seconds
[waf deny] function score is 45.57 , performance score is 50.262097000000004
[cc deny] evaluation of cc deny is arriving...
{'ip_deny': 0, 'waf_deny': 48.3852582, 'cc_deny': 0}

2023-07-21 01:18:02 score:19.6800
rce-skip1 feat:ip(no)+waf(rce,skip) bugfix
[ip deny] ip deny test finished, using 1.916756 seconds
[ip deny] exsit ip not been blocked, so your ip deny score is 0
[waf deny] waf deny test start
[waf deny] waf deny test finished, using 180.264269 seconds
[waf deny] function score is 48.14 , performance score is 49.91191033333333
[cc deny] evaluation of cc deny is arriving...
{'ip_deny': 0, 'waf_deny': 49.2031462, 'cc_deny': 0}

2023-07-21 01:49:03 score:20.2400
ua-protocol feat:ip(no)+waf(ua,protocol)
[ip deny] ip deny test finished, using 1.984407 seconds
[ip deny] exsit ip not been blocked, so your ip deny score is 0
[waf deny] waf deny test start
[waf deny] waf deny test finished, using 180.019953 seconds
[waf deny] function score is 51.54 , performance score is 49.993349
[cc deny] evaluation of cc deny is arriving...
{'ip_deny': 0, 'waf_deny': 50.6120094, 'cc_deny': 0}

2023-07-21 02:00:43 score:22.0000
0.2.7 feat:ip(no)+waf(xss,lfi,ua,protocol)
[ip deny] ip deny test finished, using 1.985081 seconds
[ip deny] exsit ip not been blocked, so your ip deny score is 0
[waf deny] waf deny test start
[waf deny] waf deny test finished, using 179.531001 seconds
[waf deny] function score is 62.29 , performance score is 50.156333
[cc deny] evaluation of cc deny is arriving...
{'ip_deny': 0, 'waf_deny': 55.009799799999996, 'cc_deny': 0}

0.2.9 feat:ip(no)+waf(xss,lfi,ua,protocol,lfi-base64)
[ip deny] ip deny test finished, using 2.016976 seconds
[ip deny] exsit ip not been blocked, so your ip deny score is 0
[waf deny] waf deny test start
[waf deny] waf deny test finished, using 179.165878 seconds
[waf deny] function score is 63.7 , performance score is 50.27804066666667
[cc deny] evaluation of cc deny is arriving...
{'ip_deny': 0, 'waf_deny': 55.6468244, 'cc_deny': 0}

2023-07-21 17:14:23 score:40.3800
0.2.10 feat:ip(no)+waf(xss,lfi,ua,protocol，lfi-base64)
[ip deny] ip deny test finished, using 1.023292 seconds
[ip deny] function score: 100, performance score: 89.53416000000001
[waf deny] waf deny test start
[waf deny] waf deny test finished, using 177.915596 seconds
[waf deny] function score is 63.7 , performance score is 50.69480133333334
[cc deny] evaluation of cc deny is arriving...
{'ip_deny': 90.12049599999999, 'waf_deny': 55.896880800000005, 'cc_deny': 0}

2023-07-22 18:35:07 score:40.8100
0.2.11 feat:ip(no)+waf(xss,lfi,rfi,ua,protocol,lfi-base64flat)
[ip deny] ip deny test finished, using 1.047351 seconds
[ip deny] function score: 100, performance score: 89.05298
[waf deny] waf deny test start
[waf deny] waf deny test finished, using 179.437477 seconds
[waf deny] function score is 67.5 , performance score is 50.18750766666666
[cc deny] evaluation of cc deny is arriving...
{'ip_deny': 89.831788, 'waf_deny': 57.112504599999994, 'cc_deny': 0}


2023-07-24 16:54:08 score:23.0400
0.2.14 feat:ip(no)+waf(xss-bs64,lfi+bs64,ua,protocol-bs64)
[ip deny] ip deny test finished, using 2.08798 seconds
[ip deny] exsit ip not been blocked, so your ip deny score is 0
[waf deny] waf deny test start
[waf deny] waf deny test finished, using 180.312393 seconds
[waf deny] function score is 69.15 , performance score is 49.895869000000005
[cc deny] evaluation of cc deny is arriving...
{'ip_deny': 0, 'waf_deny': 57.597521400000005, 'cc_deny': 0}


0.3.2 ip(cidranger)+waf(curbest+rce-832130,832160,Shellshock|urldecode)
total requests: 1000, denied requests: 1000
[ip deny] ip deny test finished, using 1.133433 seconds
[ip deny] exsit ip not been blocked, so your ip deny score is 0
time="2023-07-27T02:32:41Z" level=info msg="Scanning finished" duration=4m7.213917332s
[waf deny] waf deny test start
[waf deny] waf deny test finished, using 257.417732 seconds
[waf deny] function score is 81.88 , performance score is 24.19408933333333
time used: 7.842235, total requests: 50, passed requests: 50, denied requests: 0, score of case 1: 0
time used: 7.844235, total requests: 50, passed requests: 50, denied requests: 0, score of case 2: 0
{'ip_deny': 0.0, 'waf_deny': 47.2684536, 'cc_deny': 0.0}

2023-07-27 11:23:26 score:19.0600
0.3.3 ip(ipfilter)+waf(curbest+rce-832130,832160,Shellshock|urldecode)
same

2023-07-29 00:01:39 score:35.1000
registry.cn-hangzhou.aliyuncs.com/docker_learn_pinger/appsec-wasm:0.3.14
0.3.11 ip(radix)+waf(curbest+rce-832130,832160,Shellshock|urldecode|headers)+cc(bucket)
time="2023-07-28T16:06:30Z" level=info msg="Scanning finished" duration=4m4.827899644s
[waf deny] waf deny test start
[waf deny] waf deny test finished, using 254.954001 seconds
[waf deny] function score is 81.88 , performance score is 25.015333000000002
/tcdata/start.sh: line 234: 98 Killed envoy -c envoy-ecds.yaml --concurrency 4 --log-level info --component-log-level wasm:debug --log-format "[%Y-%m-%d %T.%f][%t][%l][%n] [%g:%#] %v" --log-path /home/envoy/logs/envoy.log > /home/envoy/logs/access.log
time used: 7.806839, total requests: 50, passed requests: 43, denied requests: 7, score of case 1: 100
time used: 7.810537, total requests: 50, passed requests: 45, denied requests: 5, score of case 2: 0
/tcdata/start.sh: line 370: 1459 Killed envoy -c envoy-ecds.yaml --concurrency 4 --log-level info --component-log-level wasm:debug --log-format "[%Y-%m-%d %T.%f][%t][%l][%n] [%g:%#] %v" --log-path /home/envoy/logs/envoy.log > /home/envoy/logs/access.log
{'ip_deny': 0.0, 'waf_deny': 47.7611998, 'cc_deny': 40.0}

2023-07-29 10:19:43 score:51.2100
0.3.14 cc(bucket)+ip(radix)+waf(best+libsqli)
total requests: 1000, denied requests: 0
[ip deny] exsit ip not been blocked, so your ip deny score is 0
time="2023-07-29T02:24:36Z" level=info msg="Scanning finished" duration=4m6.424647695s
[waf deny] waf deny test finished, using 256.588761 seconds
[waf deny] function score is 83.37 , performance score is 24.470413000000008
/tcdata/start.sh: line 234: 98 Killed envoy -c envoy-ecds.yaml --concurrency 4 --log-level info --component-log-level wasm:debug --log-format "[%Y-%m-%d %T.%f][%t][%l][%n] [%g:%#] %v" --log-path /home/envoy/logs/envoy.log > /home/envoy/logs/access.log
time used: 7.829, total requests: 50, passed requests: 43, denied requests: 7, score of case 1: 100
time used: 7.831387, total requests: 50, passed requests: 41, denied requests: 9, score of case 2: 100
/tcdata/start.sh: line 370: 1445 Killed envoy -c envoy-ecds.yaml --concurrency 4 --log-level info --component-log-level wasm:debug --log-format "[%Y-%m-%d %T.%f][%t][%l][%n] [%g:%#] %v" --log-path /home/envoy/logs/envoy.log > /home/envoy/logs/access.log
{'ip_deny': 0.0, 'waf_deny': 48.03024780000001, 'cc_deny': 80.0}


2023-08-01 16:35:45 score:68.2500
0.3.18 cc(bucket,lock)+ip(radix)+waf(best+libsqli)
total requests: 1200, denied requests: 1200
[ip deny] white test, total 100 requests, you deny 3 requests
[ip deny] ip deny test finished, using 1.444735 seconds
[ip deny] function score: 100, performance score: 81.1053
time="2023-08-01T08:40:42Z" level=info msg="Scanning finished" duration=4m6.212508054s
[waf deny] waf deny test finished, using 256.235907 seconds
[waf deny] function score is 83.37 , performance score is 24.588031
time used: 7.806499, total requests: 50, passed requests: 44, denied requests: 6, score of case 1: 100
time used: 7.809648, total requests: 50, passed requests: 42, denied requests: 8, score of case 2: 100
{'ip_deny': 85.06317999999999, 'waf_deny': 48.100818600000004, 'cc_deny': 80.0}

2023-08-05 11:37:48 score:69.0700
0.3.21 cc(bucket,lock)+ip(radix)+waf(83.37+graphql)
total requests: 1200, denied requests: 1200
[ip deny] white test, total 100 requests, you deny 3 requests
[ip deny] ip deny test finished, using 1.465854 seconds
[ip deny] function score: 100, performance score: 80.68292
time="2023-08-05T03:42:46Z" level=info msg="Scanning finished" duration=4m5.7351974s
[waf deny] waf deny test finished, using 255.925668 seconds
[waf deny] function score is 88.63 , performance score is 24.691443999999997
time used: 7.83126, total requests: 50, passed requests: 42, denied requests: 8, score of case 1: 100
time used: 7.832311, total requests: 50, passed requests: 43, denied requests: 7, score of case 2: 100
{'ip_deny': 84.809752, 'waf_deny': 50.2668664, 'cc_deny': 80.0}

2023-08-08 17:25:15 score:69.7400
0.3.37 ip(myIpLookup)+cc(bucket,muli)+waf(88+404)
total requests: 1200, denied requests: 1200
[ip deny] white test, total 100 requests, you deny 2 requests
[ip deny] ip deny test finished, using 1.424261 seconds
[ip deny] function score: 100, performance score: 81.51478
time="2023-08-08T09:30:08Z" level=info msg="Scanning finished" duration=4m4.893424898s
[waf deny] waf deny test start
[waf deny] waf deny test finished, using 254.983129 seconds
[waf deny] function score is 91.76 , performance score is 25.005623666666672
time used: 7.794096, total requests: 50, passed requests: 40, denied requests: 10, score of case 1: 100
time used: 7.793654, total requests: 50, passed requests: 42, denied requests: 8, score of case 2: 100
{'ip_deny': 85.30886799999999, 'waf_deny': 51.707374200000004, 'cc_deny': 80.0}


++++++++++++++++++++++++++++++++++++++ b 榜 ++++++++++++++++++++++++++++++++++++++++
内部测试 a:34.26  b:36.32

2023-08-16 14:01:33 score:55.6300  time≈14m25s
2023-08-05 11:37:48 score:69.0700
0.3.21 cc(bucket,lock)+ip(radix)+waf(83.37+graphql)
total requests: 1200, denied requests: 1200
[ip deny] white test, total 100 requests, you deny 3 requests
[ip deny] ip deny test finished, using 1.465854 seconds
[ip deny] function score: 100, performance score: 80.68292
time="2023-08-05T03:42:46Z" level=info msg="Scanning finished" duration=4m5.7351974s
[waf deny] waf deny test finished, using 255.925668 seconds
[waf deny] function score is 88.63 , performance score is 24.691443999999997
time used: 7.83126, total requests: 50, passed requests: 42, denied requests: 8, score of case 1: 100
time used: 7.832311, total requests: 50, passed requests: 43, denied requests: 7, score of case 2: 100
{'ip_deny': 84.809752, 'waf_deny': 50.2668664, 'cc_deny': 80.0}
waf: 36.1800 -> (88.63, 91.663)
ip: 23.2700 -> 19.27 (100.00,95.4375)
cc: 4.00 -> (0.00, ?)

waf-404: 36.6600 -> (91.76, 91.663)

ip
    my bit tree 1
    iplookup 1
    lc tree
    tinygo 0.25 内存泄露

cc
    全局令牌桶 todo
    tinygo 0.25 内存泄露

waf
    rule  half
    rx ?
    transformation base64flat
    placeholder



